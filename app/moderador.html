<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Moderador - CEAMA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      min-height: 100vh;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 3rem 1rem;
    }
    .container-custom {
      background: #fff;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 8px 25px rgba(0,0,0,0.25);
      width: 100%;
      max-width: 1100px;
    }
    .btn-approve {
      background-color: #28a745;
      color: white;
    }
    .btn-reject {
      background-color: #dc3545;
      color: white;
    }
    .status-badge {
      font-size: 0.85rem;
      padding: 0.4rem 0.6rem;
      border-radius: 10px;
    }
    #alertBox {
      position: relative;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body>
  <div class="container-custom">
    <h2 class="mb-4 text-center fw-bold">Panel Moderador</h2>
    <p class="text-center text-muted">Gestión de estudiantes inscritos</p>

    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-dark">
          <tr>
            <th>Estudiante</th>
            <th>Grado</th>
            <th>Colegio</th>
            <th>Edad</th>
            <th>Apoderado</th>
            <th>Correo</th>
            <th>Teléfono</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="studentsTable">
          <tr>
            <td>Juan Pérez</td>
            <td>5to Secundaria</td>
            <td>San José</td>
            <td>16</td>
            <td>María López</td>
            <td>maria@example.com</td>
            <td>987654321</td>
            <td><span class="status-badge bg-warning text-dark">Pendiente</span></td>
            <td>
              <div class="d-flex justify-content-center gap-2">
                <button class="btn btn-sm btn-approve" onclick="updateStatus(this, 'Aprobado')">Aprobar</button>
                <button class="btn btn-sm btn-reject" onclick="updateStatus(this, 'Rechazado')">Rechazar</button>
              </div>
            </td>
          </tr>
          <tr>
            <td>Andrea Ramírez</td>
            <td>3ro Secundaria</td>
            <td>Santa Rosa</td>
            <td>14</td>
            <td>Carlos Ramírez</td>
            <td>carlos@example.com</td>
            <td>912345678</td>
            <td><span class="status-badge bg-warning text-dark">Pendiente</span></td>
            <td>
              <div class="d-flex justify-content-center gap-2">
                <button class="btn btn-sm btn-approve" onclick="updateStatus(this, 'Aprobado')">Aprobar</button>
                <button class="btn btn-sm btn-reject" onclick="updateStatus(this, 'Rechazado')">Rechazar</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Mensaje dinámico abajo -->
    <div id="alertBox" class="alert d-none text-center" role="alert"></div>
  </div>

  <script>
    // Función para actualizar el estado
    function updateStatus(button, status) {
      const row = button.closest("tr");
      const statusCell = row.querySelector("td:nth-child(8) span");
      const alertBox = document.getElementById("alertBox");

      if (status === "Aprobado") {
        statusCell.className = "status-badge bg-success text-white";
        statusCell.innerText = "Aprobado";
        alertBox.className = "alert alert-success text-center";
        alertBox.innerText = "✅ Inscripción aprobada correctamente.";
      } else {
        statusCell.className = "status-badge bg-danger text-white";
        statusCell.innerText = "Rechazado";
        alertBox.className = "alert alert-danger text-center";
        alertBox.innerText = "❌ Inscripción rechazada.";
      }

      // Mostrar mensaje temporal
      alertBox.classList.remove("d-none");
      setTimeout(() => alertBox.classList.add("d-none"), 2500);
    }
  </script>
</body>
</html>